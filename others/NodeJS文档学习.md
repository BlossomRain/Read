# NodeJS文档学习

- [ ] 笔记时间：2021.06.15
- [ ] [文档地址](http://nodejs.cn/learn)

## 1. 基础概念

### 1.1 线程与异步

1. 使用单线程为处理主线程，异步操作会由后台线程池执行，只需关心单线程阻塞问题。模式是响应式设计模式
2. 异步执行顺序
   1. process.nextTick 表示当前事件循环结束后立即执行
   2. promise 表示所在方法结束后尽快执行
   3. setTimeout 和 setImmediate 事件循环下一次迭代运行
   4. setInterval 可以每个一段时间执行，但是遇到网络延迟情况可能重叠，这时可以采用递归定时处理。
3. JS的异步
   1. 默认是单线程同步的，浏览器通过提供一组可以处理这种功能的 API 来提供了一种实现方式。默认的回调函数都是异步的。
   2. Promise，被调用后会以处理中状态开始，最后以解决/拒绝状态返回。
   3. Promise支持链式调用，可以使用编排，比如all，any等
   4. Async 和 Await
      1. 方法上直接用 async 标识就可以表示异步，配合 await 完成。内部默认返回 Promise。

### 1.2事件触发器

1. 引入events模块，EventEmitter.on 用于添加回调函数，EventEmitter.emit 用于触发事件
2. 流，需要 stream 模块，都是EventEmitter的实例

### 1.3 http服务器

1. 引入http模块，创建服务器并监听。
2. 发出请求 引入https模块，调用对应的请求，将一些请求的参数封装到一个对象里。
3. 发送POST请求最简单的方式是使用 axios 库
4. 获取请求正文使用 Express 是很简单的

### 1.4 文件处理

1. fs 模块，调用open方法进行处理
2. fs.stat 可以获取文件详细属性
3. path 模块，用于表示路径
4. 读取文件使用 readFile 是最简单的
5. 删除文件夹比较复杂，最好安装 fs-extra 模块

### 1.5 操作系统模块

1. 引入 os 模块，可以获取各种硬件信息，系统常量等

### 1.6 Buffer

1. 使用Buffer进行缓存，在V8之外的内存空间，方法基本就是内存的分配，填充，获取，销毁。
2. JSON.stringify 可以用于打印格式化的JSON对象